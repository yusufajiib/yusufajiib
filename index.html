<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Pembelajaran Quiz Islam</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            margin: 0;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px 15px;
            text-align: center;
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .header p {
            font-size: 0.95rem;
            opacity: 0.9;
            line-height: 1.4;
        }

        /* Android TV and Large Desktop Styles */
        @media (min-width: 1200px) {
            body {
                padding: 20px;
                font-size: 1.2rem;
            }
            
            .container {
                max-width: 95vw;
                min-height: 90vh;
            }
            
            .header h1 {
                font-size: 3rem;
                margin-bottom: 15px;
            }
            
            .header p {
                font-size: 1.4rem;
            }
            
            .tab {
                padding: 20px 30px;
                font-size: 1.3rem;
                min-width: 150px;
            }
            
            .tab-content {
                padding: 40px;
            }
            
            .question-container {
                padding: 30px;
                margin-bottom: 25px;
            }
            
            .question-number {
                padding: 12px 20px;
                font-size: 1.2rem;
                margin-bottom: 20px;
            }
            
            .question-text {
                font-size: 1.4rem;
                margin-bottom: 30px;
                line-height: 1.7;
            }
            
            .option {
                padding: 18px 25px;
                font-size: 1.2rem;
                margin-bottom: 8px;
            }
            
            .option-letter {
                width: 35px;
                height: 35px;
                margin-right: 18px;
                font-size: 1.1rem;
            }
            
            .submit-btn {
                padding: 20px 50px;
                font-size: 1.4rem;
                margin-top: 40px;
                min-width: 300px;
            }
            
            .isian-input {
                padding: 18px 25px;
                font-size: 1.3rem;
                margin-top: 20px;
            }
            
            .essay-textarea {
                padding: 25px;
                font-size: 1.3rem;
                min-height: 200px;
                margin-top: 20px;
            }
            
            .answer-feedback {
                padding: 15px 25px;
                font-size: 1.2rem;
                margin-top: 15px;
            }
            
            .answer-key {
                padding: 25px;
                font-size: 1.2rem;
                margin-top: 15px;
            }
            
            .answer-key h4 {
                font-size: 1.3rem;
                margin-bottom: 12px;
            }
            
            .popup-content {
                padding: 50px;
                max-width: 700px;
            }
            
            .popup-icon {
                font-size: 5rem;
                margin-bottom: 25px;
            }
            
            .popup-title {
                font-size: 2.5rem;
                margin-bottom: 20px;
            }
            
            .popup-message {
                font-size: 1.5rem;
                margin-bottom: 30px;
            }
            
            .close-popup {
                padding: 18px 40px;
                font-size: 1.3rem;
            }
        }

        /* Ultra Large Screens (Android TV, Large Desktop) */
        @media (min-width: 1600px) {
            body {
                font-size: 1.4rem;
            }
            
            .header h1 {
                font-size: 4rem;
                margin-bottom: 20px;
            }
            
            .header p {
                font-size: 1.8rem;
            }
            
            .tab {
                padding: 25px 40px;
                font-size: 1.6rem;
                min-width: 200px;
            }
            
            .tab-content {
                padding: 50px;
            }
            
            .question-container {
                padding: 40px;
                margin-bottom: 35px;
            }
            
            .question-number {
                padding: 15px 25px;
                font-size: 1.5rem;
                margin-bottom: 25px;
            }
            
            .question-text {
                font-size: 1.8rem;
                margin-bottom: 40px;
                line-height: 1.8;
            }
            
            .option {
                padding: 25px 35px;
                font-size: 1.5rem;
                margin-bottom: 12px;
            }
            
            .option-letter {
                width: 45px;
                height: 45px;
                margin-right: 25px;
                font-size: 1.3rem;
            }
            
            .submit-btn {
                padding: 25px 60px;
                font-size: 1.8rem;
                margin-top: 50px;
                min-width: 400px;
            }
            
            .isian-input {
                padding: 25px 35px;
                font-size: 1.6rem;
                margin-top: 25px;
            }
            
            .essay-textarea {
                padding: 35px;
                font-size: 1.6rem;
                min-height: 250px;
                margin-top: 25px;
            }
            
            .answer-feedback {
                padding: 20px 35px;
                font-size: 1.4rem;
                margin-top: 20px;
            }
            
            .answer-key {
                padding: 35px;
                font-size: 1.4rem;
                margin-top: 20px;
            }
            
            .answer-key h4 {
                font-size: 1.6rem;
                margin-bottom: 15px;
            }
            
            .popup-content {
                padding: 60px;
                max-width: 900px;
            }
            
            .popup-icon {
                font-size: 6rem;
                margin-bottom: 30px;
            }
            
            .popup-title {
                font-size: 3rem;
                margin-bottom: 25px;
            }
            
            .popup-message {
                font-size: 1.8rem;
                margin-bottom: 40px;
            }
            
            .close-popup {
                padding: 22px 50px;
                font-size: 1.6rem;
            }
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
            
            .container {
                border-radius: 10px;
                margin: 0;
            }
            
            .header {
                padding: 15px 10px;
            }
            
            .header h1 {
                font-size: 1.5rem;
                margin-bottom: 5px;
            }
            
            .header p {
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.3rem;
            }
            
            .header p {
                font-size: 0.8rem;
            }
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            flex: 1;
            min-width: 120px;
            padding: 15px 20px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .tab.active {
            background: white;
            color: #4facfe;
            border-bottom-color: #4facfe;
        }

        .tab:hover {
            background: #e9ecef;
        }

        /* Mobile Responsive Tabs */
        @media (max-width: 768px) {
            .tabs {
                flex-wrap: nowrap;
                justify-content: flex-start;
            }
            
            .tab {
                flex: 0 0 auto;
                min-width: 100px;
                padding: 12px 15px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .tab {
                min-width: 80px;
                padding: 10px 12px;
                font-size: 0.8rem;
            }
        }

        .tab-content {
            display: none;
            padding: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .question-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #4facfe;
        }

        .question-number {
            background: #4facfe;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .question-text {
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        /* Mobile Responsive Content */
        @media (max-width: 768px) {
            .tab-content {
                padding: 15px;
            }
            
            .question-container {
                padding: 15px;
                margin-bottom: 12px;
                border-radius: 10px;
            }
            
            .question-number {
                padding: 6px 12px;
                font-size: 0.85rem;
                margin-bottom: 12px;
            }
            
            .question-text {
                font-size: 0.95rem;
                margin-bottom: 15px;
                line-height: 1.5;
            }
        }

        @media (max-width: 480px) {
            .tab-content {
                padding: 10px;
            }
            
            .question-container {
                padding: 12px;
                margin-bottom: 10px;
            }
            
            .question-number {
                padding: 5px 10px;
                font-size: 0.8rem;
                margin-bottom: 10px;
            }
            
            .question-text {
                font-size: 0.9rem;
                margin-bottom: 12px;
            }
        }

        .options {
            display: grid;
            gap: 10px;
        }

        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            word-wrap: break-word;
        }

        .option:hover {
            border-color: #4facfe;
            transform: translateX(3px);
        }

        .option.selected {
            border-color: #4facfe;
            background: #e3f2fd;
        }

        .option.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .option-letter {
            background: #4facfe;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 12px;
            flex-shrink: 0;
            font-size: 0.9rem;
        }

        /* Mobile Responsive Options */
        @media (max-width: 768px) {
            .options {
                gap: 8px;
            }
            
            .option {
                padding: 10px 12px;
                border-radius: 8px;
                font-size: 0.9rem;
            }
            
            .option:hover {
                transform: translateX(2px);
            }
            
            .option-letter {
                width: 25px;
                height: 25px;
                margin-right: 10px;
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .option {
                padding: 8px 10px;
                font-size: 0.85rem;
                flex-direction: row;
                align-items: flex-start;
            }
            
            .option-letter {
                width: 22px;
                height: 22px;
                margin-right: 8px;
                margin-top: 2px;
                font-size: 0.75rem;
            }
        }

        .submit-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 25px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            min-width: 200px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Mobile Responsive Buttons */
        @media (max-width: 768px) {
            .submit-btn {
                padding: 12px 30px;
                font-size: 1rem;
                margin-top: 20px;
                min-width: 180px;
                border-radius: 20px;
            }
        }

        @media (max-width: 480px) {
            .submit-btn {
                padding: 10px 25px;
                font-size: 0.9rem;
                margin-top: 15px;
                min-width: 160px;
                width: 90%;
                max-width: 250px;
            }
        }

        /* Popup Styles */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .popup-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            position: relative;
            animation: popupAppear 0.5s ease;
            margin: 20px;
        }

        @keyframes popupAppear {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .popup-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .popup-error {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            color: white;
        }

        .popup-icon {
            font-size: 3.5rem;
            margin-bottom: 15px;
        }

        .popup-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .popup-message {
            font-size: 1.1rem;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .close-popup {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .close-popup:hover {
            background: white;
            color: #333;
        }

        /* Mobile Responsive Popup */
        @media (max-width: 768px) {
            .popup-content {
                padding: 25px 20px;
                width: 95%;
                margin: 10px;
                border-radius: 12px;
            }
            
            .popup-icon {
                font-size: 3rem;
                margin-bottom: 12px;
            }
            
            .popup-title {
                font-size: 1.5rem;
                margin-bottom: 10px;
            }
            
            .popup-message {
                font-size: 1rem;
                margin-bottom: 18px;
            }
            
            .close-popup {
                padding: 10px 25px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .popup-content {
                padding: 20px 15px;
                width: 98%;
                margin: 5px;
            }
            
            .popup-icon {
                font-size: 2.5rem;
                margin-bottom: 10px;
            }
            
            .popup-title {
                font-size: 1.3rem;
                margin-bottom: 8px;
            }
            
            .popup-message {
                font-size: 0.9rem;
                margin-bottom: 15px;
            }
            
            .close-popup {
                padding: 8px 20px;
                font-size: 0.85rem;
            }
        }

        .fireworks {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .firework {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #fff;
            border-radius: 50%;
            animation: firework 1s ease-out infinite;
        }

        @keyframes firework {
            0% {
                opacity: 1;
                transform: scale(0);
            }
            50% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(1.5);
            }
        }



        @keyframes successPop {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            50% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.2);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @keyframes bombExplode {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.3);
            }
            30% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.3);
            }
            70% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .coming-soon {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .coming-soon h3 {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .coming-soon p {
            font-size: 1.2rem;
        }

        .isian-input {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 12px 15px;
            font-size: 1rem;
            width: 100%;
            max-width: 400px;
            margin-top: 15px;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .isian-input:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .isian-input.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .isian-input.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .essay-textarea {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            font-size: 1rem;
            width: 100%;
            min-height: 120px;
            margin-top: 15px;
            transition: all 0.3s ease;
            resize: vertical;
            font-family: inherit;
            box-sizing: border-box;
        }

        .essay-textarea:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .essay-textarea.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .essay-textarea.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        /* Mobile Responsive Inputs */
        @media (max-width: 768px) {
            .isian-input {
                padding: 10px 12px;
                font-size: 0.95rem;
                margin-top: 12px;
                max-width: 100%;
            }
            
            .essay-textarea {
                padding: 12px;
                font-size: 0.95rem;
                min-height: 100px;
                margin-top: 12px;
            }
        }

        @media (max-width: 480px) {
            .isian-input {
                padding: 8px 10px;
                font-size: 0.9rem;
                margin-top: 10px;
            }
            
            .essay-textarea {
                padding: 10px;
                font-size: 0.9rem;
                min-height: 80px;
                margin-top: 10px;
            }
        }

        .answer-feedback {
            margin-top: 10px;
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: 600;
            display: none;
            font-size: 0.9rem;
        }

        .answer-feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }

        .answer-feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }

        .answer-key {
            background: #e3f2fd;
            border: 1px solid #4facfe;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .answer-key h4 {
            color: #4facfe;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        /* Mobile Responsive Feedback */
        @media (max-width: 768px) {
            .answer-feedback {
                padding: 6px 12px;
                font-size: 0.85rem;
                margin-top: 8px;
            }
            
            .answer-key {
                padding: 12px;
                font-size: 0.9rem;
                margin-top: 8px;
            }
            
            .answer-key h4 {
                font-size: 0.95rem;
                margin-bottom: 6px;
            }
        }

        @media (max-width: 480px) {
            .answer-feedback {
                padding: 5px 10px;
                font-size: 0.8rem;
                margin-top: 6px;
            }
            
            .answer-key {
                padding: 10px;
                font-size: 0.85rem;
                margin-top: 6px;
            }
            
            .answer-key h4 {
                font-size: 0.9rem;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📚 Media Pembelajaran Fikih Kelas 12</h1>
            <p>Uji pemahaman Anda tentang sumber-sumber hukum Islam</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('pilihan-ganda')">Pilihan Ganda</button>
            <button class="tab" onclick="showTab('isian')">Isian</button>
            <button class="tab" onclick="showTab('essay')">Essay</button>
            <button class="tab" onclick="showTab('remedial')">Remedial</button>
            <button class="tab" onclick="showTab('pengayaan')">Pengayaan</button>
        </div>

        <div id="pilihan-ganda" class="tab-content active">
            <div id="quiz-container"></div>
            <button class="submit-btn" onclick="checkAnswers()">Periksa Jawaban</button>
        </div>

        <div id="isian" class="tab-content">
            <div id="isian-container"></div>
            <button class="submit-btn" onclick="checkIsianAnswers()">Periksa Jawaban</button>
        </div>

        <div id="essay" class="tab-content">
            <div id="essay-container"></div>
            <button class="submit-btn" onclick="checkEssayAnswers()">Periksa Jawaban</button>
        </div>

        <div id="remedial" class="tab-content">
            <div id="remedial-container"></div>
            <button class="submit-btn" onclick="checkRemedialAnswers()">Periksa Jawaban</button>
        </div>

        <div id="pengayaan" class="tab-content">
            <div id="pengayaan-container"></div>
            <button class="submit-btn" onclick="checkPengayaanAnswers()">Periksa Jawaban</button>
        </div>
    </div>

    <!-- Popup Overlay -->
    <div class="popup-overlay" id="popup-overlay">
        <div class="popup-content" id="popup-content">
            <div class="fireworks" id="fireworks"></div>
            <div class="popup-icon" id="popup-icon"></div>
            <div class="popup-title" id="popup-title"></div>
            <div class="popup-message" id="popup-message"></div>
            <button class="close-popup" onclick="closePopup()">Tutup</button>
        </div>
    </div>

    <script>
        const essayQuestions = [
            {
                question: "Bagaimana proses ijma' terbentuk, dan mengapa hasil ijma' tidak boleh diingkari oleh mujtahid generasi berikutnya?",
                answer: "Ijma' terbentuk melalui kesepakatan seluruh mujtahid pada satu masa terhadap suatu hukum syara'. Prosesnya dimulai ketika ada masalah hukum yang tidak ada nashnya, kemudian para mujtahid berijtihad dan mencapai kesepakatan. Hasil ijma' tidak boleh diingkari oleh mujtahid generasi berikutnya karena ijma' merupakan dalil qath'i yang mengikat dan telah menjadi konsensus umat. Mengingkari ijma' berarti memecah belah umat dan bertentangan dengan prinsip persatuan dalam Islam."
            },
            {
                question: "Sebutkan minimal tiga syarat penting yang harus dimiliki seorang mujtahid menurut para ulama ushul fikih!",
                answer: "Tiga syarat penting mujtahid: 1) Menguasai bahasa Arab dengan baik termasuk nahwu, sharaf, dan balaghah, 2) Menguasai Al-Qur'an dan As-Sunnah serta ilmu-ilmu yang berkaitan seperti tafsir dan hadis, 3) Menguasai ilmu ushul fikih dan mengetahui ijma' yang telah terjadi sebelumnya agar tidak bertentangan dengan kesepakatan ulama terdahulu."
            },
            {
                question: "Jelaskan perbedaan antara ijma' sahabat dan ijma' sukuti dari segi pelaksanaannya dan penerimaannya oleh ulama!",
                answer: "Ijma' sahabat adalah kesepakatan para sahabat Nabi dalam menetapkan hukum, dilaksanakan dengan musyawarah dan pernyataan eksplisit. Ijma' sukuti adalah kesepakatan yang terjadi ketika seorang mujtahid mengeluarkan pendapat dan tidak ada penolakan dari mujtahid lain. Dari segi penerimaan, ijma' sahabat diterima oleh semua ulama sebagai hujjah yang kuat, sedangkan ijma' sukuti masih diperdebatkan kehujjahannya oleh sebagian ulama."
            },
            {
                question: "Bagaimana kehujjahan dari hadis?",
                answer: "Kehujjahan hadis sebagai sumber hukum Islam sangat kuat berdasarkan Al-Qur'an dan ijma' ulama. Hadis berfungsi sebagai bayan (penjelas) Al-Qur'an, baik sebagai bayan taqrir (penetapan), bayan tafsir (penafsiran), maupun bayan tasyri' (penetapan hukum baru). Hadis sahih memiliki kekuatan hukum yang mengikat, sedangkan hadis hasan dapat dijadikan hujjah dengan kehati-hatian. Hadis dhaif tidak dapat dijadikan dasar hukum kecuali dalam masalah fadha'il al-a'mal dengan syarat-syarat tertentu."
            },
            {
                question: "Apa maksud asas at-tadriju fit tasyri'?",
                answer: "At-tadriju fit tasyri' adalah asas bertahap dalam penetapan syariat Islam. Maksudnya adalah Allah SWT menurunkan hukum-hukum Islam secara bertahap sesuai dengan kondisi dan kesiapan masyarakat. Contohnya pelarangan khamr yang dilakukan dalam tiga tahap, dan penetapan shalat yang awalnya 50 rakaat kemudian diperingan menjadi 5 waktu. Asas ini menunjukkan hikmah Allah dalam mendidik umat manusia dan memudahkan mereka dalam menjalankan syariat."
            },
            {
                question: "Jelaskan pengertian ijma' secara istilah!",
                answer: "Ijma' secara istilah adalah kesepakatan seluruh mujtahid dari umat Islam pada suatu masa setelah wafatnya Rasulullah SAW terhadap suatu hukum syara'. Ijma' harus memenuhi syarat: 1) Kesepakatan seluruh mujtahid, bukan sebagian, 2) Terjadi setelah wafatnya Rasulullah, 3) Menyangkut masalah hukum syara', 4) Para mujtahid hidup dalam satu masa yang sama."
            },
            {
                question: "Apakah yang dimaksud dengan syar'u man qablana?",
                answer: "Syar'u man qablana adalah syariat atau hukum-hukum yang berlaku bagi umat-umat sebelum Islam (seperti umat Nabi Musa dan Isa). Dalam ushul fikih, terdapat perbedaan pendapat tentang kehujjahannya. Jumhur ulama berpendapat bahwa syar'u man qablana dapat dijadikan hujjah jika disebutkan dalam Al-Qur'an atau hadis tanpa ada nasakh (pembatalan). Contohnya hukum qishas yang juga berlaku pada umat sebelumnya dan ditetapkan dalam Islam."
            },
            {
                question: "Jelaskan tiga fungsi utama qiyas dalam pembentukan hukum Islam!",
                answer: "Tiga fungsi utama qiyas: 1) Fungsi istinbath (penggalian hukum) - qiyas digunakan untuk menggali hukum dari kasus-kasus baru yang tidak ada nashnya dengan menganalogikan kepada kasus yang sudah ada hukumnya, 2) Fungsi tathbiq (penerapan) - qiyas membantu menerapkan prinsip-prinsip umum Al-Qur'an dan hadis pada kasus-kasus khusus, 3) Fungsi takmil (penyempurnaan) - qiyas melengkapi sistem hukum Islam agar dapat menjawab semua permasalahan yang muncul sepanjang zaman."
            },
            {
                question: "Mengapa Imam Syaukani berpendapat bahwa qaulu shahabi tidak dapat dijadikan hujjah?",
                answer: "Imam Syaukani menolak qaulu shahabi sebagai hujjah karena beberapa alasan: 1) Sahabat adalah manusia biasa yang dapat salah dan tidak ma'shum (terjaga dari kesalahan), 2) Tidak ada dalil qath'i yang mewajibkan mengikuti pendapat sahabat, 3) Para sahabat sendiri sering berbeda pendapat dalam masalah-masalah furu'iyyah, 4) Yang wajib diikuti hanyalah Al-Qur'an dan hadis sahih, bukan pendapat manusia meskipun dia sahabat."
            },
            {
                question: "Sebutkan pokok-pokok kandungan al-Qur'an!",
                answer: "Pokok-pokok kandungan Al-Qur'an meliputi: 1) Aqidah - berisi tentang keimanan kepada Allah, malaikat, kitab, rasul, hari akhir, dan qadha qadar, 2) Syariah - berisi hukum-hukum yang mengatur hubungan manusia dengan Allah (ibadah) dan hubungan sesama manusia (muamalah), 3) Akhlaq - berisi petunjuk tentang budi pekerti yang mulia dan perilaku terpuji, 4) Qashash (kisah-kisah) - berisi pelajaran dari kisah umat terdahulu untuk mengambil ibrah dan pelajaran."
            }
        ];

        const remedialQuestions = [
            {
                question: "Ijma' yang terjadi karena tidak adanya penolakan dari mujtahid lain terhadap pendapat mujtahid pada masanya disebut....",
                answer: "ijma' sukuti"
            },
            {
                question: "Salah satu syarat utama seorang mujtahid adalah menguasai ilmu...",
                answer: "ushul fikih"
            },
            {
                question: "Qiyas yang illat pada hukum cabangnya lebih kuat dibanding hukum asalnya disebut....",
                answer: "qiyas aulawi"
            },
            {
                question: "Para sahabat seperti Abu Bakar dan Umar menunjukkan sikap berhati-hati dalam menetapkan hukum dengan selalu merujuk pada...",
                answer: "Al-Qur'an dan hadis"
            },
            {
                question: "Dalam qiyas, objek atau kasus baru yang tidak memiliki nash hukum disebut dengan istilah...",
                answer: "far'"
            }
        ];

        const pengayaanQuestions = [
            {
                question: "Jelaskan secara singkat pengertian dan contoh dari qiyas jalli dan qiyas khafi!",
                answer: "Qiyas jalli adalah qiyas yang 'illatnya jelas dan mudah dipahami, seperti mengqiyaskan nabidz (minuman fermentasi) dengan khamr karena sama-sama memabukkan. Qiyas khafi adalah qiyas yang 'illatnya samar dan membutuhkan penelitian mendalam, seperti mengqiyaskan jual beli salam dengan jual beli biasa dalam hal kebolehannya meskipun barangnya belum ada."
            },
            {
                question: "Sebutkan dan jelaskan dua macam ijma' ditinjau dari bentuk ekspresi kesepakatannya!",
                answer: "1) Ijma' Qawli (ijma' perkataan) - kesepakatan yang dinyatakan secara eksplisit melalui perkataan atau pernyataan tegas dari para mujtahid. 2) Ijma' Sukuti (ijma' diam) - kesepakatan yang terjadi ketika seorang mujtahid mengeluarkan pendapat dan mujtahid lain diam tidak menolak dalam waktu yang memungkinkan untuk memberikan tanggapan."
            },
            {
                question: "Jelaskan makna dari qiyas musawi!",
                answer: "Qiyas musawi adalah qiyas yang kekuatan 'illat antara hukum asal (ashl) dan hukum cabang (far') adalah sama atau setara. Dalam qiyas ini, tidak ada yang lebih kuat antara keduanya, sehingga hukum yang ditetapkan untuk far' sama persis dengan hukum ashl. Contohnya mengqiyaskan emas dengan perak dalam hukum riba karena sama-sama logam mulia dan alat tukar."
            },
            {
                question: "Apa perbedaan antara ijma' qath'i dan ijma' dzanni?",
                answer: "Ijma' qath'i adalah ijma' yang pasti dan tidak diragukan lagi kebenarannya, seperti ijma' tentang wajibnya shalat lima waktu. Ijma' dzanni adalah ijma' yang masih mengandung kemungkinan salah atau diragukan, biasanya terjadi pada masalah-masalah furu'iyyah yang detail. Ijma' qath'i mengikat semua umat Islam, sedangkan ijma' dzanni masih dapat diperdebatkan oleh mujtahid lain."
            },
            {
                question: "Apa peran maqasid al-syari'ah dalam ijtihad?",
                answer: "Maqasid al-syari'ah berperan sebagai panduan dan kontrol dalam ijtihad untuk memastikan bahwa hasil ijtihad sesuai dengan tujuan-tujuan syariat Islam. Lima maqasid (hifzh al-din, al-nafs, al-aql, al-nasl, al-mal) menjadi parameter apakah suatu hukum hasil ijtihad dapat diterima atau tidak. Ijtihad yang bertentangan dengan maqasid syariah harus ditolak karena tidak sejalan dengan tujuan Islam dalam mewujudkan kemaslahatan umat manusia."
            }
        ];

        const isianQuestions = [
            {
                question: "Al-Qur'an merupakan sumber hukum Islam tertinggi karena merupakan wahyu Allah swt. yang berfungsi sebagai....",
                answer: "pedoman hidup"
            },
            {
                question: "Kesepakatan para ulama mujtahid pada satu masa setelah wafatnya Rasulullah saw. dalam menetapkan suatu hukum disebut....",
                answer: "ijma'"
            },
            {
                question: "Dalam qiyas, hukum yang sudah ada dalam al-Qur'an dan dijadikan acuan disebut...",
                answer: "asl"
            },
            {
                question: "Maksud dari dalil qath'i adalah... pasti.",
                answer: "penunjukan"
            },
            {
                question: "Ulama yang menolak menggunakan istishab sebagai sumber hukum Islam adalah...",
                answer: "Malikiyah"
            },
            {
                question: "Kebiasaan masyarakat yang berkaitan dengan perbuatan disebut....",
                answer: "'urf amali"
            },
            {
                question: "Sifat atau alasan hukum yang digunakan dalam qiyas disebut....",
                answer: "'illat"
            },
            {
                question: "Kebiasaan masyarakat dalam mempergunakan lafadz atau ungkapan tertentu disebut....",
                answer: "'urf qauli"
            },
            {
                question: "Surah an-Nahl ayat 8 dijadikan contoh hukum dalalat al-iqtiran oleh...",
                answer: "Ibnu Taimiyah"
            },
            {
                question: "Tidak boleh bertentangan dengan maqasid syariah, dalil-dalil kulli, dan juzi yang qath'i wurud dan dalalahnya, dari nash al-Qur'an dan as-Sunnah merupakan syarat berpegang teguh kepada....",
                answer: "maslahah mursalah"
            }
        ];

        const questions = [
            {
                question: "Al-Qur'an mendapatkan kedudukan sebagai sumber hukum Islam yang paling tinggi dibandingkan dengan sumber-sumber hukum lainnya karena .....",
                options: [
                    "merupakan kitab terakhir",
                    "diturunkan lebih awal dari Hadis",
                    "diturunkan menggunakan bahasa Arab",
                    "merupakan sumber hukum paling tinggi dan tidak boleh bertentangan dengannya",
                    "menjelaskan semua hukum secara rinci"
                ],
                correct: 3
            },
            {
                question: "Berikut ini yang bukan syarat seorang mujtahid adalah",
                options: [
                    "menguasai ilmu ushul fiqih",
                    "memahami maqashid syariah",
                    "menguasai ilmu tafsir",
                    "menguasai bahasa Arab",
                    "mengetahui ijma' sebelumnya"
                ],
                correct: 1
            },
            {
                question: "Ijma' tidak dapat dilakukan jika...",
                options: [
                    "para mujtahid hidup di satu masa",
                    "semua mujtahid menyetujui hukum secara lisan",
                    "disepakati oleh seluruh mujtahid di dunia",
                    "disepakati hanya oleh sekelompok mujtahid tertentu di wilayah tertentu",
                    "semua mujtahid mengetahui masalah yang dimakan"
                ],
                correct: 3
            },
            {
                question: "Salah satu contoh qiyas aulawi adalah...",
                options: [
                    "mengqiyaskan emas dengan perak",
                    "mengqiyaskan makan dengan minum",
                    "larangan memukul orang tua karena berkata \"uh\" saja dilarang",
                    "mengqiyaskan pembunuhan dengan benda berat pada benda tajam",
                    "zakat profesi dengan zakat perdagangan"
                ],
                correct: 2
            },
            {
                question: "Yang disebutkan bersamaan dengan sesuatu yang lain disebut...",
                options: [
                    "maslahah mursalah",
                    "dalalat al-iqtiran",
                    "istihsan",
                    "istihsab",
                    "syar'u man qablana"
                ],
                correct: 1
            },
            {
                question: "Menurut Imam Syafi'i hukum umrah sama dengan haji, yaitu wajib. Wajib umrah ini ditetapkan dengan kaidah....",
                options: [
                    "istishab",
                    "istihsan",
                    "masalih mursalah",
                    "syar'u man qablana",
                    "dalalat iqtiran"
                ],
                correct: 4
            },
            {
                question: "Menurut Imam... boleh berpegang kepada al-maslahah al-mursalah apabila sesuai dengan dalil kulli atau dalil juz'i dari syara'...",
                options: [
                    "Syaukani",
                    "Malik",
                    "Nawawi",
                    "Syafi'i",
                    "Hanbali"
                ],
                correct: 1
            },
            {
                question: "Mazhab yang menolak istishab sebagai sumber hukum adalah....",
                options: [
                    "Syafi'iyah",
                    "Hanafiyah",
                    "Hambaliyah",
                    "Malikiyah",
                    "Zhahiriyah"
                ],
                correct: 4
            },
            {
                question: "Perkataan sahabat yang tidak mendapatkan tantangan (reaksi) dari sahabat lain merupakan....",
                options: [
                    "hujjah bagi umat Islam",
                    "sekadar kabar dari sahabat",
                    "sumber hukum bagi umat Islam",
                    "dalil bagi sebuah perbuatan",
                    "kreativitas dari para sahabat"
                ],
                correct: 0
            },
            {
                question: "Masalah yang lahirnya boleh (mubah), tetapi dapat membuka jalan untuk melakukan perbuatan yang dilarang oleh ulama ushul fikih disebut..",
                options: [
                    "mazhab shahabi",
                    "dzari'ah",
                    "dalalat al-iqtiran",
                    "al-'urf",
                    "syar'u man qablana"
                ],
                correct: 1
            },
            {
                question: "Ulama berikut ini yang menyatakan bahwa dalalat al-iqtiran dapat dijadikan sebagai hujjah adalah....",
                options: [
                    "Ibnu Hibban",
                    "Ibnu Taimiyah",
                    "Ibnu Nashar",
                    "Muhammad Iqbal",
                    "Yusuf al-Qardhawi"
                ],
                correct: 1
            },
            {
                question: "Sesuatu yang menjadi adat kebiasaan kaum muslimin dan tidak bertentangan dengan dalil syara', tidak menghalalkan perkara haram, dan tidak membatalkan perkara wajib merupakan pengertian dari....",
                options: [
                    "ijtihad",
                    "istihsan",
                    "'urf",
                    "syar'u man qablana",
                    "istishab"
                ],
                correct: 2
            },
            {
                question: "Bahwa dengan nash-nash dan qiyas yang dibenarkan syariat senantiasa memperhatikan kemaslahatan umat manusia. Tidak ada satu pun kemaslahatan manusia yang tidak diperhatikan oleh syariat melalui petunjuknya, adalah salah satu alasan ditolaknya maslahah mursalah sebagai sumber hukum oleh...",
                options: [
                    "Syafiyah",
                    "Hanafiyah",
                    "Malikiyah",
                    "jumhur ulama",
                    "Hanabilah"
                ],
                correct: 0
            },
            {
                question: "Imam Syafi'i menolak berhujjah dengan istihsan, sebab berhujjah dengan istihsan berarti menetapkan hukum berdasarkan ....",
                options: [
                    "al-Qur'an",
                    "qiyas",
                    "sunah",
                    "hawa nafsu",
                    "ijma'"
                ],
                correct: 3
            },
            {
                question: "Adanya persoalan-persoalan yang harus dicarikan status hukumnya, sementara di dalam nash Al-Qur'an dan As-Sunah tidak ditemukan hukumnya dan mujtahid pun belum melakukan ijma', sebagai salah satu alasan ulama melakukan....",
                options: [
                    "ijma'",
                    "ijtihad",
                    "qiyas",
                    "istishab",
                    "istihsan"
                ],
                correct: 2
            },
            {
                question: "Sunah Rasulullah adalah sumber hukum Islam. Hal itu berdasarkan ....",
                options: [
                    "Q.S. an-Nisa' [4]: 59",
                    "Q.S. al-Ma'idah [5]: 90",
                    "Q.S. al-Hasyr [59]: 2",
                    "Q.S. al-Hasyr [59]: 7",
                    "Q.S. an-Nisa' [4]: 115"
                ],
                correct: 3
            },
            {
                question: "Menetapkan hukum suatu kejadian atau peristiwa yang tidak ada dasar nashnya dengan cara membandingkannya kepada suatu kejadian atau peristiwa yang lain yang telah ditetapkan hukumnya berdasarkan nash karena ada persamaan 'illat antara kedua kejadian atau peristiwa itu adalah pengertian dari ....",
                options: [
                    "ijma'",
                    "qiyas",
                    "ijtihad",
                    "sunah",
                    "istihsan"
                ],
                correct: 1
            },
            {
                question: "Menurut Imam Abu Hanifah dan Imam Syafi'i, saddu adz-dzari'ah tidak dapat dijadikan sumber hukum, karena sesuatu yang menurut hukum asalnya mubah....",
                options: [
                    "dapat mendorong dan membuka perbuatan-perbuatan yang dilarang oleh agama",
                    "tetap diperlakukan sebagai yang mubah",
                    "bisa berubah menjadi sunah",
                    "bisa berubah menjadi wajib",
                    "tetap diperlakukan sebagai yang mubah"
                ],
                correct: 1
            },
            {
                question: "Menetapkan hukum karena ada persamaan dilalat al hukm (penunjukan hukumnya) disebut qiyas....",
                options: [
                    "aulawi",
                    "syibh",
                    "musawi",
                    "murni",
                    "dilalah"
                ],
                correct: 4
            },
            {
                question: "Jumhur ulama berpendapat bahwa dalalat al-iqtiran... dijadikan hujjah.",
                options: [
                    "dapat",
                    "wajib",
                    "dianjurkan",
                    "ada kemungkinan",
                    "tidak dapat"
                ],
                correct: 4
            }
        ];

        let userAnswers = {};
        let isianAnswers = {};
        let essayAnswers = {};
        let remedialAnswers = {};
        let pengayaanAnswers = {};

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';

            questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                
                questionDiv.innerHTML = `
                    <div class="question-number">Soal ${index + 1}</div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${q.options.map((option, optIndex) => `
                            <div class="option" onclick="selectOption(${index}, ${optIndex})">
                                <div class="option-letter">${String.fromCharCode(97 + optIndex)}</div>
                                <div>${option}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                container.appendChild(questionDiv);
            });
        }

        function selectOption(questionIndex, optionIndex) {
            // Remove previous selection
            const questionContainer = document.querySelectorAll('.question-container')[questionIndex];
            const options = questionContainer.querySelectorAll('.option');
            options.forEach(opt => {
                opt.classList.remove('selected');
                opt.style.pointerEvents = 'auto';
            });
            
            // Add selection to clicked option
            options[optionIndex].classList.add('selected');
            userAnswers[questionIndex] = optionIndex;
            
            // Immediate feedback
            const isCorrect = optionIndex === questions[questionIndex].correct;
            
            if (isCorrect) {
                showInstantSuccess(options[optionIndex]);
            } else {
                showInstantError(options[optionIndex]);
            }
            
            // Disable all options for this question
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
        }

        function checkAnswers() {
            let correctCount = 0;
            let totalQuestions = questions.length;

            questions.forEach((q, index) => {
                const questionContainer = document.querySelectorAll('.question-container')[index];
                const options = questionContainer.querySelectorAll('.option');
                
                options.forEach((opt, optIndex) => {
                    opt.classList.remove('selected', 'correct', 'incorrect');
                    
                    if (optIndex === q.correct) {
                        opt.classList.add('correct');
                    } else if (userAnswers[index] === optIndex) {
                        opt.classList.add('incorrect');
                    }
                });

                if (userAnswers[index] === q.correct) {
                    correctCount++;
                }
            });

            // Show popup based on results
            const percentage = (correctCount / totalQuestions) * 100;
            if (percentage >= 70) {
                showSuccessPopup(correctCount, totalQuestions, percentage);
            } else {
                showErrorPopup(correctCount, totalQuestions, percentage);
            }

            // Disable submit button
            document.querySelector('.submit-btn').disabled = true;
        }

        function showSuccessPopup(correct, total, percentage) {
            const overlay = document.getElementById('popup-overlay');
            const content = document.getElementById('popup-content');
            const icon = document.getElementById('popup-icon');
            const title = document.getElementById('popup-title');
            const message = document.getElementById('popup-message');

            content.className = 'popup-content popup-success';
            icon.innerHTML = '🎉';
            title.innerHTML = 'SELAMAT!';
            message.innerHTML = `Anda berhasil menjawab ${correct} dari ${total} soal dengan benar!<br>Skor: ${percentage.toFixed(1)}%`;

            createFireworks();
            overlay.style.display = 'flex';
        }

        function showErrorPopup(correct, total, percentage) {
            const overlay = document.getElementById('popup-overlay');
            const content = document.getElementById('popup-content');
            const icon = document.getElementById('popup-icon');
            const title = document.getElementById('popup-title');
            const message = document.getElementById('popup-message');

            content.className = 'popup-content popup-error';
            icon.innerHTML = '💣';
            title.innerHTML = 'OOPS!';
            message.innerHTML = `Anda menjawab ${correct} dari ${total} soal dengan benar.<br>Skor: ${percentage.toFixed(1)}%<br>Belajar lagi ya!`;

            overlay.style.display = 'flex';
        }

        function createFireworks() {
            const fireworksContainer = document.getElementById('fireworks');
            fireworksContainer.innerHTML = '';

            for (let i = 0; i < 20; i++) {
                const firework = document.createElement('div');
                firework.className = 'firework';
                firework.style.left = Math.random() * 100 + '%';
                firework.style.top = Math.random() * 100 + '%';
                firework.style.animationDelay = Math.random() * 2 + 's';
                firework.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                fireworksContainer.appendChild(firework);
            }
        }

        function showInstantSuccess(optionElement) {
            // Create success message
            const successMsg = document.createElement('div');
            successMsg.innerHTML = '🎉 HEBAT! 🎉';
            successMsg.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
                color: white;
                padding: 20px 40px;
                border-radius: 15px;
                font-size: 2rem;
                font-weight: bold;
                z-index: 100;
                animation: successPop 2s ease-out forwards;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;
            
            optionElement.style.position = 'relative';
            optionElement.appendChild(successMsg);
            
            // Add success styling
            optionElement.style.background = 'linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)';
            optionElement.style.borderColor = '#28a745';
            optionElement.style.transform = 'scale(1.02)';
            
            // Remove message after animation
            setTimeout(() => {
                if (successMsg.parentNode) {
                    successMsg.remove();
                }
            }, 2000);
        }

        function showInstantError(optionElement) {
            // Create bomb explosion
            const bombMsg = document.createElement('div');
            bombMsg.innerHTML = '💥 BOM MELEDAK! 💥';
            bombMsg.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
                color: white;
                padding: 30px 60px;
                border-radius: 20px;
                font-size: 3rem;
                font-weight: bold;
                z-index: 50;
                animation: bombExplode 2s ease-out forwards;
                box-shadow: 0 15px 40px rgba(0,0,0,0.4);
                text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            `;
            
            optionElement.style.position = 'relative';
            optionElement.appendChild(bombMsg);
            
            // Add error styling
            optionElement.style.background = 'linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%)';
            optionElement.style.borderColor = '#dc3545';
            optionElement.style.animation = 'shake 0.5s ease-in-out';
            
            // Remove message after animation
            setTimeout(() => {
                if (bombMsg.parentNode) {
                    bombMsg.remove();
                }
            }, 2000);
        }

        function closePopup() {
            document.getElementById('popup-overlay').style.display = 'none';
            document.getElementById('fireworks').innerHTML = '';
        }

        function showTab(tabName) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));

            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        function renderIsianQuiz() {
            const container = document.getElementById('isian-container');
            container.innerHTML = '';

            isianQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                
                questionDiv.innerHTML = `
                    <div class="question-number">Soal ${index + 1}</div>
                    <div class="question-text">${q.question}</div>
                    <input type="text" class="isian-input" id="isian-${index}" 
                           placeholder="Ketik jawaban Anda di sini..." 
                           oninput="handleIsianInput(${index}, this.value)">
                    <div class="answer-feedback" id="feedback-${index}"></div>
                `;
                
                container.appendChild(questionDiv);
            });
        }

        function handleIsianInput(questionIndex, value) {
            isianAnswers[questionIndex] = value.trim();
            
            // Real-time feedback
            const input = document.getElementById(`isian-${questionIndex}`);
            const feedback = document.getElementById(`feedback-${questionIndex}`);
            const correctAnswer = isianQuestions[questionIndex].answer.toLowerCase();
            const userAnswer = value.trim().toLowerCase();
            
            // Clear previous styling
            input.classList.remove('correct', 'incorrect');
            feedback.classList.remove('correct', 'incorrect');
            feedback.style.display = 'none';
            
            if (userAnswer && userAnswer === correctAnswer) {
                input.classList.add('correct');
                feedback.classList.add('correct');
                feedback.innerHTML = '✅ HEBAT! Jawaban benar!';
                feedback.style.display = 'block';
                
                // Show success animation
                showIsianSuccess(input);
            } else if (userAnswer && userAnswer !== correctAnswer) {
                input.classList.add('incorrect');
                feedback.classList.add('incorrect');
                feedback.innerHTML = '❌ BOM MELEDAK! Coba lagi!';
                feedback.style.display = 'block';
                
                // Show error animation
                showIsianError(input);
            }
        }

        function checkIsianAnswers() {
            let correctCount = 0;
            let totalQuestions = isianQuestions.length;

            isianQuestions.forEach((q, index) => {
                const input = document.getElementById(`isian-${index}`);
                const feedback = document.getElementById(`feedback-${index}`);
                const userAnswer = (isianAnswers[index] || '').toLowerCase();
                const correctAnswer = q.answer.toLowerCase();
                
                // Clear previous styling
                input.classList.remove('correct', 'incorrect');
                feedback.classList.remove('correct', 'incorrect');
                
                if (userAnswer === correctAnswer) {
                    input.classList.add('correct');
                    feedback.classList.add('correct');
                    feedback.innerHTML = `✅ Benar! Jawaban: ${q.answer}`;
                    correctCount++;
                } else {
                    input.classList.add('incorrect');
                    feedback.classList.add('incorrect');
                    feedback.innerHTML = `❌ Salah! Jawaban yang benar: ${q.answer}`;
                }
                
                feedback.style.display = 'block';
                input.disabled = true;
            });

            // Show popup based on results
            const percentage = (correctCount / totalQuestions) * 100;
            if (percentage >= 70) {
                showSuccessPopup(correctCount, totalQuestions, percentage);
            } else {
                showErrorPopup(correctCount, totalQuestions, percentage);
            }

            // Disable submit button
            event.target.disabled = true;
        }

        function showIsianSuccess(inputElement) {
            // Create success message
            const successMsg = document.createElement('div');
            successMsg.innerHTML = '🎉 HEBAT! 🎉';
            successMsg.style.cssText = `
                position: absolute;
                top: -60px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
                color: white;
                padding: 15px 30px;
                border-radius: 10px;
                font-size: 1.2rem;
                font-weight: bold;
                z-index: 100;
                animation: successPop 2s ease-out forwards;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                pointer-events: none;
            `;
            
            inputElement.style.position = 'relative';
            inputElement.parentNode.appendChild(successMsg);
            
            // Remove message after animation
            setTimeout(() => {
                if (successMsg.parentNode) {
                    successMsg.remove();
                }
            }, 2000);
        }

        function showIsianError(inputElement) {
            // Create bomb explosion
            const bombMsg = document.createElement('div');
            bombMsg.innerHTML = '💥 BOM MELEDAK! 💥';
            bombMsg.style.cssText = `
                position: absolute;
                top: -60px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
                color: white;
                padding: 15px 30px;
                border-radius: 10px;
                font-size: 1.2rem;
                font-weight: bold;
                z-index: 50;
                animation: bombExplode 2s ease-out forwards;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
                pointer-events: none;
            `;
            
            inputElement.style.position = 'relative';
            inputElement.parentNode.appendChild(bombMsg);
            
            // Add shake animation to input
            inputElement.style.animation = 'shake 0.5s ease-in-out';
            
            // Remove message after animation
            setTimeout(() => {
                if (bombMsg.parentNode) {
                    bombMsg.remove();
                }
                inputElement.style.animation = '';
            }, 2000);
        }

        function renderEssayQuiz() {
            const container = document.getElementById('essay-container');
            container.innerHTML = '';

            essayQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                
                questionDiv.innerHTML = `
                    <div class="question-number">Soal ${index + 1}</div>
                    <div class="question-text">${q.question}</div>
                    <textarea class="essay-textarea" id="essay-${index}" 
                              placeholder="Tulis jawaban essay Anda di sini..."></textarea>
                    <div class="answer-feedback" id="essay-feedback-${index}"></div>
                `;
                
                container.appendChild(questionDiv);
            });
        }

        function checkEssayAnswers() {
            let correctCount = 0;
            let totalQuestions = essayQuestions.length;

            essayQuestions.forEach((q, index) => {
                const textarea = document.getElementById(`essay-${index}`);
                const feedback = document.getElementById(`essay-feedback-${index}`);
                
                // For essay, we'll show the answer key instead of automatic checking
                feedback.innerHTML = `
                    <div class="answer-key">
                        <h4>Kunci Jawaban:</h4>
                        ${q.answer}
                    </div>
                `;
                feedback.style.display = 'block';
                textarea.disabled = true;
                
                // Count as correct for scoring (teacher will manually grade)
                correctCount++;
            });

            // Show success popup for essay (manual grading needed)
            const overlay = document.getElementById('popup-overlay');
            const content = document.getElementById('popup-content');
            const icon = document.getElementById('popup-icon');
            const title = document.getElementById('popup-title');
            const message = document.getElementById('popup-message');

            content.className = 'popup-content popup-success';
            icon.innerHTML = '📝';
            title.innerHTML = 'ESSAY SELESAI!';
            message.innerHTML = `Jawaban essay telah disimpan!<br>Silakan bandingkan dengan kunci jawaban yang ditampilkan.<br>Penilaian manual diperlukan oleh guru.`;

            overlay.style.display = 'flex';

            // Disable submit button
            event.target.disabled = true;
        }

        function renderRemedialQuiz() {
            const container = document.getElementById('remedial-container');
            container.innerHTML = '';

            remedialQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                
                questionDiv.innerHTML = `
                    <div class="question-number">Soal ${index + 1}</div>
                    <div class="question-text">${q.question}</div>
                    <input type="text" class="isian-input" id="remedial-${index}" 
                           placeholder="Ketik jawaban Anda di sini..." 
                           oninput="handleRemedialInput(${index}, this.value)">
                    <div class="answer-feedback" id="remedial-feedback-${index}"></div>
                `;
                
                container.appendChild(questionDiv);
            });
        }

        function handleRemedialInput(questionIndex, value) {
            remedialAnswers[questionIndex] = value.trim();
            
            // Real-time feedback
            const input = document.getElementById(`remedial-${questionIndex}`);
            const feedback = document.getElementById(`remedial-feedback-${questionIndex}`);
            const correctAnswer = remedialQuestions[questionIndex].answer.toLowerCase();
            const userAnswer = value.trim().toLowerCase();
            
            // Clear previous styling
            input.classList.remove('correct', 'incorrect');
            feedback.classList.remove('correct', 'incorrect');
            feedback.style.display = 'none';
            
            if (userAnswer && userAnswer === correctAnswer) {
                input.classList.add('correct');
                feedback.classList.add('correct');
                feedback.innerHTML = '✅ HEBAT! Jawaban benar!';
                feedback.style.display = 'block';
                
                // Show success animation
                showIsianSuccess(input);
            } else if (userAnswer && userAnswer !== correctAnswer) {
                input.classList.add('incorrect');
                feedback.classList.add('incorrect');
                feedback.innerHTML = '❌ BOM MELEDAK! Coba lagi!';
                feedback.style.display = 'block';
                
                // Show error animation
                showIsianError(input);
            }
        }

        function checkRemedialAnswers() {
            let correctCount = 0;
            let totalQuestions = remedialQuestions.length;

            remedialQuestions.forEach((q, index) => {
                const input = document.getElementById(`remedial-${index}`);
                const feedback = document.getElementById(`remedial-feedback-${index}`);
                const userAnswer = (remedialAnswers[index] || '').toLowerCase();
                const correctAnswer = q.answer.toLowerCase();
                
                // Clear previous styling
                input.classList.remove('correct', 'incorrect');
                feedback.classList.remove('correct', 'incorrect');
                
                if (userAnswer === correctAnswer) {
                    input.classList.add('correct');
                    feedback.classList.add('correct');
                    feedback.innerHTML = `✅ Benar! Jawaban: ${q.answer}`;
                    correctCount++;
                } else {
                    input.classList.add('incorrect');
                    feedback.classList.add('incorrect');
                    feedback.innerHTML = `❌ Salah! Jawaban yang benar: ${q.answer}`;
                }
                
                feedback.style.display = 'block';
                input.disabled = true;
            });

            // Show popup based on results
            const percentage = (correctCount / totalQuestions) * 100;
            if (percentage >= 70) {
                showSuccessPopup(correctCount, totalQuestions, percentage);
            } else {
                showErrorPopup(correctCount, totalQuestions, percentage);
            }

            // Disable submit button
            event.target.disabled = true;
        }

        function renderPengayaanQuiz() {
            const container = document.getElementById('pengayaan-container');
            container.innerHTML = '';

            pengayaanQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                
                questionDiv.innerHTML = `
                    <div class="question-number">Soal ${index + 1}</div>
                    <div class="question-text">${q.question}</div>
                    <textarea class="essay-textarea" id="pengayaan-${index}" 
                              placeholder="Tulis jawaban Anda di sini..."></textarea>
                    <div class="answer-feedback" id="pengayaan-feedback-${index}"></div>
                `;
                
                container.appendChild(questionDiv);
            });
        }

        function checkPengayaanAnswers() {
            let correctCount = 0;
            let totalQuestions = pengayaanQuestions.length;

            pengayaanQuestions.forEach((q, index) => {
                const textarea = document.getElementById(`pengayaan-${index}`);
                const feedback = document.getElementById(`pengayaan-feedback-${index}`);
                
                // For pengayaan, we'll show the answer key instead of automatic checking
                feedback.innerHTML = `
                    <div class="answer-key">
                        <h4>Kunci Jawaban:</h4>
                        ${q.answer}
                    </div>
                `;
                feedback.style.display = 'block';
                textarea.disabled = true;
                
                // Count as correct for scoring (teacher will manually grade)
                correctCount++;
            });

            // Show success popup for pengayaan (manual grading needed)
            const overlay = document.getElementById('popup-overlay');
            const content = document.getElementById('popup-content');
            const icon = document.getElementById('popup-icon');
            const title = document.getElementById('popup-title');
            const message = document.getElementById('popup-message');

            content.className = 'popup-content popup-success';
            icon.innerHTML = '🌟';
            title.innerHTML = 'PENGAYAAN SELESAI!';
            message.innerHTML = `Jawaban pengayaan telah disimpan!<br>Silakan bandingkan dengan kunci jawaban yang ditampilkan.<br>Penilaian manual diperlukan oleh guru.`;

            overlay.style.display = 'flex';

            // Disable submit button
            event.target.disabled = true;
        }

        // Initialize all quizzes on page load
        renderQuiz();
        renderIsianQuiz();
        renderEssayQuiz();
        renderRemedialQuiz();
        renderPengayaanQuiz();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97c453d4f54f9c74',t:'MTc1NzM5NjE4MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
